{% extends 'base.html.twig' %}

{% block title %}
	admin | Savourez la santé
{% endblock %}

{% block body %}
	<section class="models">
		{% include 'Frontend/Home/_banner.html.twig' %}
	</section>
	<h1 class="admin-title">Bienvenue sur la page d'administration de recette</h1>

	<a href="{{ path('admin.recette.create') }}" class="btn btn-margin btn-outline-primary btnBlue">Ajouter une recette</a>

	<div class="mt-4 admin-recipes-list">
		<h2>Liste des recettes</h2>
		<table class="table">
			<thead>
				<tr>
					<th>Nom</th>
					<th>Visible en ligne</th>
					<th>Date de création</th>
					<th class="test">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for recette in recettes %}
					<tr>
						<td>{{ recette.name }}</td>
						<td>{{ recette.online ? 'Oui' : 'Non' }}</td>
						<td>{{ recette.createdAt ? recette.createdAt|date('d/m/Y H:i') : 'N/A' }}</td>
						<td class="actions">
							<a href="{{ path('admin.recette.edit', {id: recette.id}) }}" class="btn btnBlue btn-sm btn-outline-primary action-btn">Modifier</a>
							<form action="{{ path('admin.recette.delete', {id: recette.id}) }}" method="POST" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cette recette ?')" class="d-inline">
								<input type="hidden" name="token" value="{{ csrf_token('delete' ~ recette.id) }}">
								<button type="submit" class="btn btn-sm btnRed btn-outline-danger action-btn">Supprimer</button>
							</form>
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="4">Aucune recette trouvée.</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
